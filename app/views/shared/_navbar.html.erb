<!-- Le helper de Devise methode qui renvoie true ou false ne fonction du statut de connexion de l'utilisateur -->
<%= user_signed_in? %>

<div class="navbar-wagon">
  <!-- Logo -->
  <a href="/" class="navbar-wagon-brand">
    <%= image_tag "lewagon.png" %>
  </a>

  <!-- Right Navigation -->
  <div class="navbar-wagon-right hidden-xs hidden-sm">

    <!-- Conditionnel utililisant Devise -->
    <% if user_signed_in? %>
    <!--<a href="" class="navbar-wagon-item navbar-wagon-link">Host</a>-->

    <!-- Lien vers tous les produits avec la balise link_to -->
    <%= link_to "All products", products_path, class: "navbar-wagon-item navbar-wagon-link" %>
    <%= link_to "Add product", new_product_path, class: "navbar-wagon-item navbar-wagon-button btn btn-lg btn-danger" %>

    <%= link_to "Deconnexion", destroy_user_session_path, method: :delete %>
    <!--
        <a href="" class="navbar-wagon-item navbar-wagon-link">Trips</a>
        <a href="" class="navbar-wagon-item navbar-wagon-link">Messages</a>
    -->
    <!-- Profile picture with dropdown list -->
    <div class="navbar-wagon-item">
      <div class="dropdown">
        <!-- si l'user actuel a un avatar on l'affiche sinon img default -->
        <% if current_user.avatar? %>
          <%= cl_image_tag current_user.avatar.path, width: 50, height: 50, crop: :fill, class: 'avatar dropdown-toggle', id: 'navbar-wagon-menu', :'data-toggle' => 'dropdown' %>
        <% else %>
          <img src="https://kitt.lewagon.com/placeholder/users/ssaunier" class="avatar dropdown-toggle" id="navbar-wagon-menu" data-toggle="dropdown">
          <!--<img src="http:/placehold.it/30x30" class="avatar dropdown-toggle" id="navbar-wagon-menu" data-toggle="dropdown">-->
        <% end %>
        <ul class="dropdown-menu dropdown-menu-right navbar-wagon-dropdown-menu">
          <li><a href="#">Profile</a></li>
          <li><a href="#">Dashboard</a></li>
          <li>
            <%= link_to "Deconnexion", destroy_user_session_path, method: :delete %>
          </li>
        </ul>
      </div>
    </div>

    <% else %>

      <%= link_to "Connexion", new_user_session_path, class: "navbar-wagon-item navbar-wagon-link" %>
      <%= link_to "Inscription", new_user_registration_path, class: "navbar-wagon-item navbar-wagon-link" %>
    <% end %>
  </div>

  <!-- Dropdown appearing on mobile only -->
  <div class="navbar-wagon-item hidden-md hidden-lg">
    <div class="dropdown">
      <i class="fa fa-bars dropdown-toggle" data-toggle="dropdown"></i>
      <ul class="dropdown-menu dropdown-menu-right navbar-wagon-dropdown-menu">
        <li><a href="#">Host</a></li>
        <li><a href="#">Trips</a></li>
        <li><a href="#">Messagese</a></li>
      </ul>
    </div>
  </div>
</div>
